#version 450
#extension GL_ARB_shading_language_include : enable

layout(local_size_x = 1) in;

#include "common/buffers.glsli"
#include "common/command_buffers.glsli"
#include "common/math.glsli"


void main() {
	if (gl_GlobalInvocationID.x == 0) {
		B_stroke_vertex_attribs = StrokeVertexAttribsBuffer(balloc_acquire(B_common_balloc_buffer, M_BUF_SIZE(StrokeVertexAttribsBuffer, B_common_desc.num_stroke_vertices)));

		DrawIndirectCommand command;
		command.vertex_count = B_common_desc.num_stroke_vertices;
		command.instance_count = 1;
		command.first_vertex = 0;
		command.first_instance = 0;
		B_draw_indirect_commands.cmds[E_DrawIndirectCommand_STROKE_RENDERING] = command;
	}
}
