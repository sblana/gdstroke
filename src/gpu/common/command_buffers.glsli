#ifndef COMMAND_BUFFERS_GLSLI
#define COMMAND_BUFFERS_GLSLI

#include "common/sanity.glsli"


struct DispatchIndirectCommand {
	uint workgroups_x;
	uint workgroups_y;
	uint workgroups_z;
	uint pad;
};

#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_EDGES            (0)
#define E_DispatchIndirectCommand_WORKGROUP_TO_CONTOUR_EDGES             (1)
#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_FRAGMENTS        (2)
#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_PIXELS           (3)
#define E_DispatchIndirectCommand_INVOCATION_TO_SPARSE_PIXEL_EDGES       (4)
#define E_DispatchIndirectCommand_INVOCATION_TO_COMPACTED_PIXEL_EDGES    (5)
#define E_DispatchIndirectCommand_WORKGROUP_TO_PIXEL_EDGE_LOOPS          (6)
#define E_DispatchIndirectCommand_INVOCATION_TO_SEGMENTS                 (7)
#define E_DispatchIndirectCommand_INVOCATION_TO_SEGMENT_EDGES            (8)
#define E_DispatchIndirectCommand_MAX                                    (9)

layout(set = 1, binding = 0, std430) RESTRICT buffer DispatchIndirectCommandsBuffer {
	DispatchIndirectCommand cmds[E_DispatchIndirectCommand_MAX];
} B_dispatch_indirect_commands;


struct DrawIndirectCommand {
	uint vertex_count;
	uint instance_count;
	uint first_vertex;
	uint first_instance;
};

#define E_DrawIndirectCommand_HARD_DEPTH_TEST (0)
#define E_DrawIndirectCommand_MAX             (1)

layout(set = 1, binding = 1, std430) RESTRICT buffer DrawIndirectCommandsBuffer {
	DrawIndirectCommand cmds[E_DrawIndirectCommand_MAX];
} B_draw_indirect_commands;

#endif // !COMMAND_BUFFERS_GLSLI
