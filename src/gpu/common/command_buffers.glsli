#ifndef COMMAND_BUFFERS_GLSLI
#define COMMAND_BUFFERS_GLSLI

#extension GL_ARB_shading_language_include : enable
#include "common/sanity.glsli"


struct DispatchIndirectCommand {
	uint workgroups_x;
	uint workgroups_y;
	uint workgroups_z;
	uint pad;
};

#define E_DispatchIndirectCommand_REUSABLE_ALLOCATION_L0                 ( 0)
#define E_DispatchIndirectCommand_INVOCATION_TO_GLOBAL_EDGES             ( 1)
#define E_DispatchIndirectCommand_INVOCATION_TO_GLOBAL_FACES             ( 2)
#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_EDGES            ( 3)
#define E_DispatchIndirectCommand_WORKGROUP_TO_CONTOUR_EDGES             ( 4)
#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_FRAGMENTS        ( 5)
#define E_DispatchIndirectCommand_INVOCATION_TO_CONTOUR_PIXELS           ( 6)
#define E_DispatchIndirectCommand_INVOCATION_TO_SPARSE_PIXEL_EDGES       ( 7)
#define E_DispatchIndirectCommand_INVOCATION_TO_FRAGMENTED_PIXEL_EDGES   ( 8)
#define E_DispatchIndirectCommand_INVOCATION_TO_COMPACTED_PIXEL_EDGES    ( 9)
#define E_DispatchIndirectCommand_WORKGROUP_TO_PIXEL_EDGE_LOOPS          (10)
#define E_DispatchIndirectCommand_INVOCATION_TO_SEGMENTS                 (11)
#define E_DispatchIndirectCommand_INVOCATION_TO_SEGMENT_EDGES            (12)
#define E_DispatchIndirectCommand_MAX                                    (13)

layout(set = 1, binding = 0, std430) RESTRICT buffer DispatchIndirectCommandsBuffer {
	DispatchIndirectCommand cmds[E_DispatchIndirectCommand_MAX];
} B_dispatch_indirect_commands;


struct DrawIndirectCommand {
	uint vertex_count;
	uint instance_count;
	uint first_vertex;
	uint first_instance;
};

#define E_DrawIndirectCommand_HARD_DEPTH_TEST  (0)
#define E_DrawIndirectCommand_STROKE_RENDERING (1)
#define E_DrawIndirectCommand_MAX              (2)

layout(set = 1, binding = 1, std430) RESTRICT buffer DrawIndirectCommandsBuffer {
	DrawIndirectCommand cmds[E_DrawIndirectCommand_MAX];
} B_draw_indirect_commands;

#endif // !COMMAND_BUFFERS_GLSLI
